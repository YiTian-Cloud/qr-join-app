(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{1198:(e,n,a)=>{"use strict";a.d(n,{Cy:()=>c,s$:()=>d});var r=a(2078),s=a(1328),t=a(9708),l=a(5704);let o=null;function i(){var e;return o||(o=null!=(e=(0,r.Dk)()[0])?e:(0,r.Wp)({apiKey:l.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:l.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:l.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:l.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:l.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:l.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:l.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID})),o}function c(){return(0,s.xI)(i())}function d(){return(0,t.aU)(i())}},1682:(e,n,a)=>{Promise.resolve().then(a.bind(a,5196))},5196:(e,n,a)=>{"use strict";a.d(n,{default:()=>c});var r=a(5155),s=a(2115),t=a(63),l=a(1198),o=a(1328),i=a(9708);function c(){var e,n;let a=(0,t.useSearchParams)(),c=null!=(e=a.get("group"))?e:"",d=null!=(n=a.get("code"))?n:"",[u,m]=(0,s.useState)({name:"",email:"",phone:""}),[p,h]=(0,s.useState)(!1),[g,E]=(0,s.useState)(!1),[_,x]=(0,s.useState)(null),[N,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,l.Cy)(),n=(0,o.hg)(e,e=>{E(!!e)});return(0,o.zK)(e).catch(e=>{var n;console.error("Anon sign-in failed",e),v("Sign-in failed: ".concat(null!=(n=e.code)?n:e.message))}),()=>n()},[]);let S=(0,s.useMemo)(()=>{let e=window.location.origin,n=new URLSearchParams;return c&&n.set("group",c),d&&n.set("code",d),"".concat(e,"/join?").concat(n.toString())},[c,d]),b=(0,s.useMemo)(()=>{let e=encodeURIComponent(S);return"https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=".concat(e)},[S]),I=e=>{let{name:n,value:a}=e.target;m(e=>({...e,[n]:a}))},f=async e=>{if(e.preventDefault(),x(null),v(null),!c)return void v("Missing group parameter in the URL (?group=...)");h(!0);try{let e=(0,l.s$)(),n=(0,i.rJ)(e,"joins");await (0,i.gS)(n,{group:c,code:d||null,name:u.name.trim(),email:u.email.trim(),phone:u.phone.trim(),createdAt:(0,i.O5)()}),x("Saved! You’re in the group."),m({name:"",email:"",phone:""})}catch(a){var n;console.error("Save error",a);let e=null!=(n=null==a?void 0:a.message)?n:"Unknown error";v("Save failed: ".concat(e))}finally{h(!1)}};return(0,r.jsxs)("main",{className:"p-6 space-y-6",children:[(0,r.jsxs)("header",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"Join Golf Group"}),(0,r.jsxs)("p",{className:"text-sm opacity-70",children:["Group: ",(0,r.jsx)("span",{className:"font-mono",children:c||"(none)"}),d?(0,r.jsxs)(r.Fragment,{children:[" \xb7 Code: ",(0,r.jsx)("span",{className:"font-mono",children:d})]}):null]})]}),(0,r.jsxs)("section",{className:"flex items-center gap-6",children:[(0,r.jsx)("img",{src:b,alt:"Join QR code",width:220,height:220,className:"border rounded"}),(0,r.jsxs)("div",{className:"text-xs break-all opacity-70",children:["Scan to open: ",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"font-mono",children:S})]})]}),!g&&(0,r.jsx)("div",{className:"text-amber-700 bg-amber-50 border border-amber-200 p-3 rounded",children:"Attempting anonymous sign-in…"}),_&&(0,r.jsx)("div",{className:"text-green-700 bg-green-50 border border-green-200 p-3 rounded",children:_}),N&&(0,r.jsx)("div",{className:"text-red-700 bg-red-50 border border-red-200 p-3 rounded",children:N}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-3 max-w-md",children:[(0,r.jsx)("input",{name:"name",value:u.name,onChange:I,placeholder:"Name",className:"border p-2 w-full rounded",required:!0}),(0,r.jsx)("input",{name:"email",type:"email",value:u.email,onChange:I,placeholder:"Email",className:"border p-2 w-full rounded",required:!0}),(0,r.jsx)("input",{name:"phone",value:u.phone,onChange:I,placeholder:"Phone",className:"border p-2 w-full rounded"}),(0,r.jsx)("button",{type:"submit",disabled:p||!g,className:"px-4 py-2 rounded bg-black text-white disabled:opacity-50",children:p?"Saving…":"Save"})]})]})}}},e=>{e.O(0,[135,210,978,441,255,358],()=>e(e.s=1682)),_N_E=e.O()}]);